{% extends "layout.html" %} {% block body %}
<!-- Start: 1 Row 2 Columns -->
<div class="d-xl-flex justify-content-xl-start"></div>
<!-- End: 1 Row 2 Columns -->
<!-- Start: 1 Row 3 Columns -->
<div class="d-xl-flex justify-content-xl-start"></div>
<!-- End: 1 Row 3 Columns -->
<!-- Start: 1 Row 3 Columns -->
<div></div>
<!-- End: 1 Row 3 Columns -->
<!-- Start: 1 Row 4 Columns -->
<div>
	<div class="clearfix"></div>
	<div class="clearfix"></div>
	<div class="clearfix"></div>
</div>
<!-- End: 1 Row 4 Columns -->
<!-- Start: Map Clean -->
<div class="map-clean" style="max-width: 100%; margin-top: -1000px; background: #FF512F;fallback for old browsers */background: -webkit-linear-gradient(to right, #F09819, #FF512F);background: linear-gradient(to right, #F09819, #e77221);">
	<div id='map' style="max-width: 50%; height: 1000px; bottom: -1000px;">
		<div id='menu'> <input id='streets-v11' style="margin-top: 18px; margin-left: 10px;" type='radio' name='rtoggle' value='Streets' checked='checked'> <label style="text-align: left; padding: 1%;font-family: 'Open Sans', sans-serif;font-style: normal;font-weight: normal;margin-left: 5px; color: #ffffff; font-weight: medium; font-size: 15px;" for='streets'>Streets</label> <input id='light-v10' type='radio' name='rtoggle' value='Light'> <label style="text-align: left; padding: 1%;font-family: 'Open Sans', sans-serif;font-style: normal;font-weight: normal;margin-left: 5px; color: #ffffff; font-weight: medium; font-size: 15px;" for='light'>Light</label> <input id='dark-v10' type='radio' name='rtoggle' value='Dark'> <label style="text-align: left; padding: 1%;font-family: 'Open Sans', sans-serif;font-style: normal;font-weight: normal;margin-left: 5px; color: #ffffff; font-weight: medium; font-size: 15px;" for='dark'>Dark</label> <input id='outdoors-v11' type='radio' name='rtoggle' value='Outdoors'> <label style="text-align: left; padding: 1%;font-family: 'Open Sans', sans-serif;font-style: normal;font-weight: normal;margin-left: 5px; color: #ffffff; font-weight: medium; font-size: 15px;" for='outdoors'>Outdoors</label> <input id='satellite-v9' type='radio' name='rtoggle' value='Satellite'> <label style="text-align: left; padding: 1%;font-family: 'Open Sans', sans-serif;font-style: normal;font-weight: normal;margin-left: 5px; color: #ffffff; font-weight: medium; font-size: 15px;" for='satellite'>Satellite</label> </div>
	</div>
	<script src='https://unpkg.com/es6-promise@4.2.4/dist/es6-promise.auto.min.js'></script>
	<script src="https://unpkg.com/@mapbox/mapbox-sdk/umd/mapbox-sdk.min.js"></script>
	<style>
		.mapboxgl-popup {
		  max-width: 100%;
		  -webkit-box-shadow: 0px 5px 16px 3px rgba(43,43,43,0.23);box-shadow: 0px 5px 16px 3px rgba(43,43,43,0.23);border-radius: 2%;
		  }
	</style>
	<script>
		mapboxgl.accessToken = 'pk.eyJ1Ijoibmljb2xhc2dwbyIsImEiOiJjanl0azh4aWMwNTM1M2hvenM3bWp1aWNvIn0.BFY-LcZgI6TofrtVw8UpnQ';
		var map = new mapboxgl.Map({
		style: 'mapbox://styles/mapbox/streets-v11',
		center: [-71.116306,42.374245 ], // starting position
		zoom: 9,
		pitch: 45,
		bearing: -17.6,
		container: 'map',
		antialias: true
		});

		var layerList = document.getElementById('menu');
		var inputs = layerList.getElementsByTagName('input');




		 // Add zoom and rotation controls to the map.
		map.addControl(new mapboxgl.NavigationControl());

		// The 'building' layer in the mapbox-streets vector source contains building-height
		// data from OpenStreetMap.
		map.on('load', function() {
		// Insert the layer beneath any symbol layer.
		var layers = map.getStyle().layers;

		var labelLayerId;
		for (var i = 0; i < layers.length; i++) {
		if (layers[i].type === 'symbol' && layers[i].layout['text-field']) {
		labelLayerId = layers[i].id;
		break;
		}
		}

		map.setPaintProperty('building', 'fill-color', [
		"interpolate",
		["exponential", 0.5],
		["zoom"],
		15,
		"#a7a6ac",
		22,
		"#a7a6ac"
		]);


		map.addLayer({
		'id': '3d-buildings',
		'source': 'composite',
		'source-layer': 'building',
		'filter': ['==', 'extrude', 'true'],
		'type': 'fill-extrusion',
		'minzoom': 15,
		'paint': {
		'fill-extrusion-color': '#aaa',

		// use an 'interpolate' expression to add a smooth transition effect to the
		// buildings as the user zooms in
		'fill-extrusion-height': [
		"interpolate", ["linear"], ["zoom"],
		15, 0,
		15.05, ["get", "height"]
		],
		'fill-extrusion-base': [
		"interpolate", ["linear"], ["zoom"],
		15, 0,
		15.05, ["get", "min_height"]
		],
		'fill-extrusion-opacity': .6
		}
		}, labelLayerId);
		});
	</script>
	<script>
		function switchLayer(layer) {
		var layerId = layer.target.id;
		map.setStyle('mapbox://styles/mapbox/' + layerId);
		}



		for (var i = 0; i < inputs.length; i++) {
		inputs[i].onclick = switchLayer;
		}
	</script>
	<div class="container d-xl-flex justify-content-xl-start" style="background-image: url(&quot;static/img/tyler-nix-694kMSZcK_Y-unsplash.jpg?h=ed20f387453ab45ef1c103a782990104&quot;);width: 50%;margin-left: 50%;background-color: #ffffff;opacity: 1;">
		<div class="row d-lg-flex d-xl-flex justify-content-lg-start justify-content-xl-start align-items-xl-start" style="height: 1000px;overflow: scroll;background-color: rgba(238,238,238,0.8);">


			{% for property in final_product %}
			<div class="col-md-6 d-lg-flex justify-content-lg-start align-items-lg-start" style="padding: 4%;">
				<div class="card d-lg-flex" style="background-color: rgba(255,255,255,0);/*top: -12pc;*/">
					<div class="card-body" style="width: 100%px;background-color: #ffffff;height: 100%;-webkit-box-shadow: 0px 5px 16px 3px rgba(43,43,43,0.23);box-shadow: 0px 5px 16px 3px rgba(43,43,43,0.23);border-radius: 2%;padding: 0;"><img src="{{ property.photo_url }}" style="width: 100%; margin 0%; border-radius: 3% 3% 0% 0%;">
						<h4 class="card-title" style="font-weight: black;color: #0a253e;padding: 2%;margin: 0;margin-bottom: 0;text-align: left;font-family: 'Open Sans', sans-serif;margin-left: 5px;">{{ property.style }} at {{property.address}}</h4>
						<h6 class="" style="text-align: left;padding: 2%;margin-bottom: 0;font-family: 'Open Sans', sans-serif;font-style: normal;font-weight: normal;margin-left: 5px; color: #e77221;">List Price: ${{ property.list_price }}</h6>
						<h6 style="font-size: 10px; color: #Ffffff;">...</h6>
						<p class="card-text" style="padding: 2%;text-align: left;margin-left: -1px;margin-bottom: 0;margin-top: -3%;font-family: 'Open Sans', sans-serif;font-size: 16px;color: #7d8285;"><i class="la la-bed" style="padding: 2%;color: #e77221;"></i> &#128705; {{ property.baths }} Baths</p>
						<p class="card-text" style="padding: 2%;text-align: left;margin-left: -1px;margin-bottom: 0;font-family: 'Open Sans', sans-serif;color: #7d8285;"><i class="la la-bed" style="padding: 2%;color: #e77221;"></i> &#128719; {{ property.beds }} Bedrooms</p>
						<p class="card-text" style="padding: 2%;text-align: left;margin-left: -1px;margin-bottom: 4%;font-family: 'Open Sans', sans-serif;color: #7d8285;"><i class="la la-birthday-cake" style="padding: 2%;color: #e77221;"></i> &#127969; {{ property.sqft }} Square Feet</p>
						<a href="{{ url_for('property_detail', cid=property.cid) }}"> <button class="btn btn-primary" type="button" style="margin-bottom: 5%;width: 90%;font-weight: normal;border-width: 0;background: #FF512F;fallback for old browsers */background: -webkit-linear-gradient(to right, #F09819, #FF512F);background: linear-gradient(to right, #F09819, #e77221);font-family: 'Open Sans', sans-serif;font-size: 15px;margin-right: 5%;margin-left: 5%;">See Details</button></div>
					</a>
				</div>
			</div>
			<script>
				mapboxgl.accessToken = 'pk.eyJ1Ijoibmljb2xhc2dwbyIsImEiOiJjanl0azh4aWMwNTM1M2hvenM3bWp1aWNvIn0.BFY-LcZgI6TofrtVw8UpnQ';
				      // eslint-disable-next-line no-undef
				      var mapboxClient = mapboxSdk({ accessToken: mapboxgl.accessToken });
				      mapboxClient.geocoding.forwardGeocode({
				      query: '{{ property.address }} {{ property.city }} {{ property.state }}',
				      autocomplete: false,
				      limit: 1
				      })
				      .send()
				      .then(function (response) {
				      if (response && response.body && response.body.features && response.body.features.length) {
				      var feature = response.body.features[0];




				      var markerHeight = 10, markerRadius = 10, linearOffset = 25;
				var popupOffsets = {
				 'top': [0, 0],
				 'top-left': [0,0],
				 'top-right': [0,0],
				 'bottom': [0, -markerHeight],
				 'bottom-left': [linearOffset, (markerHeight - markerRadius + linearOffset) * -1],
				 'bottom-right': [-linearOffset, (markerHeight - markerRadius + linearOffset) * -1],
				 'left': [markerRadius, (markerHeight - markerRadius) * -1],
				 'right': [-markerRadius, (markerHeight - markerRadius) * -1]
				 };
				var popup = new mapboxgl.Popup({offset: popupOffsets, className: '.mapboxgl-popup'})
				  .setLngLat(feature.center)
				  .setHTML("<img src='{{ property.photo_url }}' style='width: 100%; margin 0%; border-radius: 3% 3% 0% 0%;'><h4 class='card-title' style='font-weight: black;color: #0a253e;padding: 2%;margin: 0;margin-bottom: 0;text-align: left;font-family: 'Open Sans', sans-serif;margin-left: 5px;'>{{ property.style }} at {{property.address}}</h4><h6 class='' style='text-align: left;padding: 2%;margin-bottom: 0;font-family: 'Open Sans', sans-serif;font-style: normal;font-weight: normal;margin-left: 5px; color: #e77221;'>List Price: ${{ property.list_price }}</h6><h6 style ='font-size: 10px; color: #Ffffff;'>...</h6><p class='card-text' style='padding: 2%;text-align: left;margin-left: -1px;margin-bottom: 0;margin-top: -3%;font-family: 'Open Sans', sans-serif;font-size: 16px;color: #7d8285;'><i class='la la-bed' style='padding: 2%;color: #e77221;'></i> &#128705; {{ property.baths }} Baths</p><p class='card-text' style='padding: 2%;text-align: left;margin-left: -1px;margin-bottom: 0;font-family: 'Open Sans', sans-serif;color: #7d8285;'><i class='la la-bed' style='padding: 2%;color: #e77221;'></i> &#128719; {{ property.beds }} Bedrooms</p><p class='card-text' style='padding: 2%;text-align: left;margin-left: -1px;margin-bottom: 4%;font-family: 'Open Sans', sans-serif;color: #7d8285;'><i class='la la-birthday-cake' style='padding: 2%;color: #e77221;'></i> &#127969; {{ property.sqft }} Square Feet</p><a href='{{ url_for('property_detail', cid=property.cid) }}'><button class='btn btn-primary' type='button' style='margin-bottom: 5%;width: 90%;font-weight: normal;border-width: 0;background: #FF512F;fallback for old browsers */background: -webkit-linear-gradient(to right, #F09819, #FF512F);background: linear-gradient(to right, #F09819, #e77221); font-family: 'Open Sans', sans-serif;font-size: 15px;margin-right: 5%;margin-left: 5%; width: 280px;'>See Details</button></div></a>")
				  .setMaxWidth("300px");


				  new mapboxgl.Marker({color: '#e77221'})
				  .setLngLat(feature.center)
				  .setPopup(popup)
				  .addTo(map);
				  }
				      });
			</script> {% endfor %}

			 {% if prev_url %}
			<a href="{{ prev_url }}"> <button class="btn btn-primary" type="button" style="width: 200px;float: left;position: relative;top: -20px;font-weight: normal;border-width: 0;font-family: 'Open Sans', sans-serif;font-size: 15px;color: #ffffff;background: #141E30;background: -webkit-linear-gradient(to right, #243B55, #141E30);background: linear-gradient(to right, #243B55, #141E30);margin-left: 30px;">
      &#9664; Previous Page</button> </a> {% endif %} {% if next_url %}
			<a href="{{ next_url }}"> <button class="btn btn-primary" type="button" style="width: 200px;float: right;position: relative;top: -20px;font-weight: normal;border-width: 0;font-family: 'Open Sans', sans-serif;font-size: 15px;color: #ffffff;background: #141E30;background: -webkit-linear-gradient(to right, #243B55, #141E30);background: linear-gradient(to right, #243B55, #141E30);margin-right: 30px; margin-left: 260px;">
      Next Page &#9654;</button> </a> {% endif %} </div>
	</div>
	<div class="overlay" style="height: 100%;width: 100%;color: rgba(255,255,255,0.43);background-color: #e10c0c;opacity: 0.88;filter: blur(0px) grayscale(100%) saturate(0%) sepia(0%);max-width: 100%%;"></div>
</div>
<!-- End: Map Clean -->
<!-- Start: Map Clean -->
<div class="map-clean"></div>
<!-- End: Map Clean -->{% endblock %}
